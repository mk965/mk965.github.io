(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c2632"],{"49a8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-tree-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",labelInValue:"",disabled:e.disabled,dropdownStyle:{maxHeight:"400px",overflow:"auto"},placeholder:e.placeholder,loadData:e.asyncLoadTreeData,value:e.treeValue,treeData:e.treeData,multiple:e.multiple},on:{change:e.onChange}})},n=[],i=a("0fea");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function l(e){return d(e)||c(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function d(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var s={name:"JCategorySelect",props:{value:{type:String,required:!1},placeholder:{type:String,default:"请选择",required:!1},disabled:{type:Boolean,default:!1,required:!1},condition:{type:String,default:"",required:!1},multiple:{type:Boolean,default:!1},loadTriggleChange:{type:Boolean,default:!1,required:!1},pid:{type:String,default:"",required:!1},pcode:{type:String,default:"",required:!1},back:{type:String,default:"",required:!1}},data:function(){return{treeValue:"",treeData:[],url:"/sys/category/loadTreeData",view:"/sys/category/loadDictItem/",tableName:"",text:"",code:""}},watch:{value:function(){this.loadItemByCode()},pcode:function(){this.loadRoot()}},created:function(){var e=this;this.validateProp().then((function(){e.loadRoot(),e.loadItemByCode()}))},methods:{loadRoot:function(){var e=this,t={pid:this.pid,pcode:this.pcode?this.pcode:"0",condition:this.condition};Object(i["c"])(this.url,t).then((function(t){if(t.success&&t.result){var a=!0,r=!1,n=void 0;try{for(var i,o=t.result[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var u=i.value;u.value=u.key,0==u.leaf?u.isLeaf=!1:1==u.leaf&&(u.isLeaf=!0)}}catch(c){r=!0,n=c}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}e.treeData=l(t.result)}}))},loadItemByCode:function(){var e=this;this.value&&"0"!=this.value?Object(i["c"])(this.view,{ids:this.value}).then((function(t){if(t.success){var a=e.value.split(",");e.treeValue=t.result.map((function(e,t){return{key:a[t],value:a[t],label:e}})),e.onLoadTriggleChange(t.result[0])}})):this.treeValue=[]},onLoadTriggleChange:function(e){!this.multiple&&this.loadTriggleChange&&this.backValue(this.value,e)},backValue:function(e,t){var a={};this.back&&(a[this.back]=t),this.$emit("change",e,a)},asyncLoadTreeData:function(e){var t=this;return new Promise((function(a){if(e.$vnode.children)a();else{var r=e.$vnode.key,n={pid:r,condition:t.condition};Object(i["c"])(t.url,n).then((function(e){if(e.success){var n=!0,i=!1,o=void 0;try{for(var u,c=e.result[Symbol.iterator]();!(n=(u=c.next()).done);n=!0){var d=u.value;d.value=d.key,0==d.leaf?d.isLeaf=!1:1==d.leaf&&(d.isLeaf=!0)}}catch(s){i=!0,o=s}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}t.addChildren(r,e.result,t.treeData),t.treeData=l(t.treeData)}a()}))}}))},addChildren:function(e,t,a){if(a&&a.length>0){var r=!0,n=!1,i=void 0;try{for(var o,l=a[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;if(u.key==e){t&&0!=t.length?u.children=t:u.isLeaf=!0;break}this.addChildren(e,t,u.children)}}catch(c){n=!0,i=c}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}}},onChange:function(e){e?e instanceof Array||(this.backValue(e.value,e.label),this.treeValue=e):(this.$emit("change",""),this.treeValue="")},getCurrTreeData:function(){return this.treeData},validateProp:function(){var e=this,t=this.condition;return new Promise((function(a,r){if(t)try{var n=JSON.parse(t);"object"==o(n)&&n?a():(e.$message.error("组件JTreeSelect-condition传值有误，需要一个json字符串!"),r())}catch(i){e.$message.error("组件JTreeSelect-condition传值有误，需要一个json字符串!"),r()}else a()}))}},model:{prop:"value",event:"change"}},f=s,h=a("2877"),y=Object(h["a"])(f,r,n,!1,null,null,null);t["default"]=y.exports}}]);