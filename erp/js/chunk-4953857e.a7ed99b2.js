(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4953857e","chunk-2d0ae8ce","chunk-2d0e9773"],{"0b17":function(t,a,e){"use strict";e.r(a);var l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-card",{attrs:{bordered:!1}},[e("j-modal",{staticStyle:{top:"5%",height:"100%","overflow-y":"hidden"},attrs:{title:t.title,width:t.width,visible:t.visible,maskClosable:!1,keyboard:!1,forceRender:!0,wrapClassName:"ant-modal-cust-warp"},on:{cancel:t.handleCancel}},[e("template",{slot:"footer"},["收预付款"===t.financialType?e("a-button",{directives:[{name:"print",rawName:"v-print",value:"#advanceInPrint",expression:"'#advanceInPrint'"}],attrs:{ghost:"",type:"primary"}},[t._v("打印")]):t._e(),"转账"===t.financialType?e("a-button",{directives:[{name:"print",rawName:"v-print",value:"#giroPrint",expression:"'#giroPrint'"}],attrs:{ghost:"",type:"primary"}},[t._v("打印")]):t._e(),"收入"===t.financialType?e("a-button",{directives:[{name:"print",rawName:"v-print",value:"#itemInPrint",expression:"'#itemInPrint'"}],attrs:{ghost:"",type:"primary"}},[t._v("打印")]):t._e(),"支出"===t.financialType?e("a-button",{directives:[{name:"print",rawName:"v-print",value:"#itemOutPrint",expression:"'#itemOutPrint'"}],attrs:{ghost:"",type:"primary"}},[t._v("打印")]):t._e(),"收款"===t.financialType?e("a-button",{directives:[{name:"print",rawName:"v-print",value:"#moneyInPrint",expression:"'#moneyInPrint'"}],attrs:{ghost:"",type:"primary"}},[t._v("打印")]):t._e(),"付款"===t.financialType?e("a-button",{directives:[{name:"print",rawName:"v-print",value:"#moneyOutPrint",expression:"'#moneyOutPrint'"}],attrs:{ghost:"",type:"primary"}},[t._v("打印")]):t._e(),e("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")])],1),e("a-form",{attrs:{form:t.form}},["收预付款"===t.financialType?[e("section",{ref:"print",attrs:{id:"advanceInPrint"}},[e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"付款会员"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{hidden:""}}),t._v("\n                "+t._s(t.model.organName)+"\n              ")],1)],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"财务人员"}},[t._v("\n                "+t._s(t.model.handsPersonName)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"单据日期"}},[t._v("\n                "+t._s(t.model.billTimeStr)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"单据编号"}},[t._v("\n                "+t._s(t.model.billNo)+"\n              ")])],1)],1),e("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"id",pagination:!1,columns:t.advanceInColumns,dataSource:t.dataSource}}),e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{lg:24,md:24,sm:24}},[e("a-form-item",{staticStyle:{padding:"20px 10px"},attrs:{labelCol:t.labelCol,wrapperCol:{xs:{span:24},sm:{span:24}},label:""}},[t._v("\n                "+t._s(t.model.remark)+"\n              ")])],1)],1),e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"合计金额"}},[t._v("\n                "+t._s(t.model.totalPrice)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"收款金额"}},[t._v("\n                "+t._s(t.model.changeAmount)+"\n              ")])],1),e("a-col",{attrs:{span:6}}),e("a-col",{attrs:{span:6}}),e("a-col",{attrs:{span:6}})],1)],1)]:t._e(),"转账"===t.financialType?[e("section",{ref:"print",attrs:{id:"giroPrint"}},[e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"财务人员"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{hidden:""}}),t._v("\n                "+t._s(t.model.handsPersonName)+"\n              ")],1)],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"单据日期"}},[t._v("\n                "+t._s(t.model.billTimeStr)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"单据编号"}},[t._v("\n                "+t._s(t.model.billNo)+"\n              ")])],1),e("a-col",{attrs:{span:6}})],1),e("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"id",pagination:!1,columns:t.giroColumns,dataSource:t.dataSource}}),e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{lg:24,md:24,sm:24}},[e("a-form-item",{staticStyle:{padding:"20px 10px"},attrs:{labelCol:t.labelCol,wrapperCol:{xs:{span:24},sm:{span:24}},label:""}},[t._v("\n                "+t._s(t.model.remark)+"\n              ")])],1)],1),e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"付款账户"}},[t._v("\n                "+t._s(t.model.accountName)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"实付金额"}},[t._v("\n                "+t._s(t.model.changeAmount)+"\n              ")])],1),e("a-col",{attrs:{span:6}}),e("a-col",{attrs:{span:6}})],1)],1)]:t._e(),"收入"===t.financialType?[e("section",{ref:"print",attrs:{id:"itemInPrint"}},[e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"客户"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{hidden:""}}),t._v("\n                "+t._s(t.model.organName)+"\n              ")],1)],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"财务人员"}},[t._v("\n                "+t._s(t.model.handsPersonName)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"单据日期"}},[t._v("\n                "+t._s(t.model.billTimeStr)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"单据编号"}},[t._v("\n                "+t._s(t.model.billNo)+"\n              ")])],1)],1),e("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"id",pagination:!1,columns:t.itemInColumns,dataSource:t.dataSource}}),e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{lg:24,md:24,sm:24}},[e("a-form-item",{staticStyle:{padding:"20px 10px"},attrs:{labelCol:t.labelCol,wrapperCol:{xs:{span:24},sm:{span:24}},label:""}},[t._v("\n                "+t._s(t.model.remark)+"\n              ")])],1)],1),e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"收入账户"}},[t._v("\n                "+t._s(t.model.accountName)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"收入金额"}},[t._v("\n                "+t._s(t.model.changeAmount)+"\n              ")])],1),e("a-col",{attrs:{span:6}}),e("a-col",{attrs:{span:6}})],1)],1)]:t._e(),"支出"===t.financialType?[e("section",{ref:"print",attrs:{id:"itemOutPrint"}},[e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"供应商"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{hidden:""}}),t._v("\n                "+t._s(t.model.organName)+"\n              ")],1)],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"财务人员"}},[t._v("\n                "+t._s(t.model.handsPersonName)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"单据日期"}},[t._v("\n                "+t._s(t.model.billTimeStr)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"单据编号"}},[t._v("\n                "+t._s(t.model.billNo)+"\n              ")])],1)],1),e("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"id",pagination:!1,columns:t.itemOutColumns,dataSource:t.dataSource}}),e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{lg:24,md:24,sm:24}},[e("a-form-item",{staticStyle:{padding:"20px 10px"},attrs:{labelCol:t.labelCol,wrapperCol:{xs:{span:24},sm:{span:24}},label:""}},[t._v("\n                "+t._s(t.model.remark)+"\n              ")])],1)],1),e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"支出账户"}},[t._v("\n                "+t._s(t.model.accountName)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"支出金额"}},[t._v("\n                "+t._s(t.model.changeAmount)+"\n              ")])],1),e("a-col",{attrs:{span:6}}),e("a-col",{attrs:{span:6}})],1)],1)]:t._e(),"收款"===t.financialType?[e("section",{ref:"print",attrs:{id:"moneyInPrint"}},[e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"客户"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{hidden:""}}),t._v("\n                "+t._s(t.model.organName)+"\n              ")],1)],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"财务人员"}},[t._v("\n                "+t._s(t.model.handsPersonName)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"单据日期"}},[t._v("\n                "+t._s(t.model.billTimeStr)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"单据编号"}},[t._v("\n                "+t._s(t.model.billNo)+"\n              ")])],1)],1),e("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"id",pagination:!1,columns:t.moneyInColumns,dataSource:t.dataSource},scopedSlots:t._u([{key:"numberCustomRender",fn:function(a,l){return e("span",{},[e("a",{on:{click:function(a){return t.myHandleDetail(l)}}},[t._v(t._s(l.billNumber))])])}}],null,!1,2876634935)}),e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{lg:24,md:24,sm:24}},[e("a-form-item",{staticStyle:{padding:"20px 10px"},attrs:{labelCol:t.labelCol,wrapperCol:{xs:{span:24},sm:{span:24}},label:""}},[t._v("\n                "+t._s(t.model.remark)+"\n              ")])],1)],1),e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"收款账户"}},[t._v("\n                "+t._s(t.model.accountName)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"合计收款"}},[t._v("\n                "+t._s(t.model.totalPrice)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"优惠金额"}},[t._v("\n                "+t._s(t.model.discountMoney)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"实际收款"}},[t._v("\n                "+t._s(t.model.changeAmount)+"\n              ")])],1)],1)],1)]:t._e(),"付款"===t.financialType?[e("section",{ref:"print",attrs:{id:"moneyOutPrint"}},[e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"供应商"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{hidden:""}}),t._v("\n                "+t._s(t.model.organName)+"\n              ")],1)],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"财务人员"}},[t._v("\n                "+t._s(t.model.handsPersonName)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"单据日期"}},[t._v("\n                "+t._s(t.model.billTimeStr)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"单据编号"}},[t._v("\n                "+t._s(t.model.billNo)+"\n              ")])],1)],1),e("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"id",pagination:!1,columns:t.moneyOutColumns,dataSource:t.dataSource}}),e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{lg:24,md:24,sm:24}},[e("a-form-item",{staticStyle:{padding:"20px 10px"},attrs:{labelCol:t.labelCol,wrapperCol:{xs:{span:24},sm:{span:24}},label:""}},[t._v("\n                "+t._s(t.model.remark)+"\n              ")])],1)],1),e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"付款账户"}},[t._v("\n                "+t._s(t.model.accountName)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"合计付款"}},[t._v("\n                "+t._s(t.model.totalPrice)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"优惠金额"}},[t._v("\n                "+t._s(t.model.discountMoney)+"\n              ")])],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"实际付款"}},[t._v("\n                "+t._s(t.model.changeAmount)+"\n              ")])],1)],1)],1)]:t._e(),t.fileList.length>0?[e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}},label:"附件"}},[e("ul",{staticStyle:{"list-style-type":"none"}},t._l(t.fileList,(function(a,l){return e("li",{key:l},[e("a",{attrs:{href:a.url,target:"_blank"}},[t._v(t._s(a.name))])])})),0)])],1),e("a-col",{attrs:{span:12}})],1)]:t._e()],2)],2),e("bill-detail",{ref:"modalDetail"})],1)},r=[],o=e("88bc"),n=e.n(o),i=e("9be9"),s=e("0fea"),c=e("4ec3"),d={name:"FinancialDetail",components:{BillDetail:i["default"]},data:function(){return{title:"详情",width:"1200px",visible:!1,model:{},financialType:"",fileList:[],labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}},form:this.$form.createForm(this),loading:!1,dataSource:[],url:{detailList:"/accountItem/getDetailList"},advanceInColumns:[{title:"账户名称",dataIndex:"accountName",width:"30%"},{title:"金额",dataIndex:"eachAmount",width:"30%"},{title:"备注",dataIndex:"remark",width:"30%"}],giroColumns:[{title:"账户名称",dataIndex:"accountName",width:"30%"},{title:"金额",dataIndex:"eachAmount",width:"30%"},{title:"备注",dataIndex:"remark",width:"30%"}],itemInColumns:[{title:"收入项目",dataIndex:"inOutItemName",width:"30%"},{title:"金额",dataIndex:"eachAmount",width:"30%"},{title:"备注",dataIndex:"remark",width:"30%"}],itemOutColumns:[{title:"支出项目",dataIndex:"inOutItemName",width:"30%"},{title:"金额",dataIndex:"eachAmount",width:"30%"},{title:"备注",dataIndex:"remark",width:"30%"}],moneyInColumns:[{title:"销售单据编号",dataIndex:"billNumber",width:"20%",scopedSlots:{customRender:"numberCustomRender"}},{title:"应收欠款",dataIndex:"needDebt",width:"10%"},{title:"已收欠款",dataIndex:"finishDebt",width:"10%"},{title:"本次收款",dataIndex:"eachAmount",width:"10%"},{title:"备注",dataIndex:"remark",width:"20%"}],moneyOutColumns:[{title:"采购单据编号",dataIndex:"billNumber",width:"20%"},{title:"应付欠款",dataIndex:"needDebt",width:"10%"},{title:"已付欠款",dataIndex:"finishDebt",width:"10%"},{title:"本次付款",dataIndex:"eachAmount",width:"10%"},{title:"备注",dataIndex:"remark",width:"20%"}]}},created:function(){},methods:{show:function(t,a){var e=this;this.financialType=a;var l=t.fileName;if(l){var r=l.split(",");this.fileList=[];for(var o=0;o<r.length;o++){var i={};i.name=r[o].replace("financial/",""),i.url=window._CONFIG["domianURL"]+"/systemConfig/static/"+r[o],this.fileList.push(i)}}else this.fileList=[];this.visible=!0,this.model=Object.assign({},t),this.$nextTick((function(){e.form.setFieldsValue(n()(e.model,"id"))}));var s={headerId:this.model.id},c=(this.readOnly,this.url.detailList);this.requestSubTableData(c,s)},requestSubTableData:function(t,a,e){var l=this;this.loading=!0,Object(s["c"])(t,a).then((function(t){t&&200===t.code&&(l.dataSource=t.data.rows,"function"===typeof e&&e(t))})).finally((function(){l.loading=!1}))},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1},myHandleDetail:function(t){var a=this;Object(c["ab"])({number:t.billNumber}).then((function(t){t&&200===t.code&&(a.$refs.modalDetail.show(t.data,t.data.subType+t.data.type),a.$refs.modalDetail.title=t.data.subType+t.data.type+"-详情")}))}}},m=d,u=e("2877"),p=Object(u["a"])(m,l,r,!1,null,"74ea4c78",null);a["default"]=p.exports},"267bb":function(t,a,e){"use strict";e.r(a),e.d(a,"FinancialModalMixin",(function(){return n}));e("e2e0");var l=e("4ec3"),r=e("0fea"),o=e("ca00"),n={data:function(){return{action:"",supList:[],cusList:[],retailList:[],personList:[],accountList:[],spans:{labelCol1:{span:2},wrapperCol1:{span:22},labelCol1_5:{span:3},wrapperCol1_5:{span:21},labelCol2:{span:4},wrapperCol2:{span:20},labelCol3:{span:6},wrapperCol3:{span:18},labelCol6:{span:12},wrapperCol6:{span:12}}}},created:function(){},computed:{readOnly:function(){return"add"!==this.action&&"edit"!==this.action}},methods:{addInit:function(t){var a=this;Object(r["c"])("/sequence/buildNumber").then((function(e){e&&200===e.code&&a.form.setFieldsValue({billNo:t+e.data.defaultNumber})})),this.$nextTick((function(){a.form.setFieldsValue({billTime:Object(o["g"])(),totalPrice:0,discountMoney:0,changeAmount:0})})),this.$nextTick((function(){Object(l["ib"])({}).then((function(t){if(t&&200===t.code){var e=!0,l=!1,r=void 0;try{for(var o,n=t.data.accountList[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var i=o.value;i.isDefault&&a.form.setFieldsValue({accountId:i.id})}}catch(s){l=!0,r=s}finally{try{e||null==n.return||n.return()}finally{if(l)throw r}}}}))}))},initSupplier:function(){var t=this;Object(l["db"])({}).then((function(a){a&&(t.supList=a)}))},initCustomer:function(){var t=this;Object(l["bb"])({}).then((function(a){a&&(t.cusList=a)}))},initRetail:function(){var t=this;Object(l["cb"])({}).then((function(a){a&&(t.retailList=a)}))},initPerson:function(){var t=this;Object(l["qb"])({type:"财务员"}).then((function(a){a&&200===a.code&&(t.personList=a.data.personList)}))},initInOutItem:function(t){var a=this;Object(l["fb"])({type:t}).then((function(t){if(t){var e=!0,l=!1,r=void 0;try{for(var o,n=a.accountTable.columns[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var i=o.value;if("inOutItemId"==i.key){i.options=[];for(var s=0;s<t.length;s++){var c={};c.value=t[s].id+"",c.text=t[s].name,c.title=t[s].name,i.options.push(c)}}}}catch(d){l=!0,r=d}finally{try{e||null==n.return||n.return()}finally{if(l)throw r}}}}))},initAccount:function(){var t=this;Object(l["ib"])({}).then((function(a){a&&200===a.code&&(t.accountList=a.data.accountList)}))},initDetailAccount:function(){var t=this;Object(l["ib"])({}).then((function(a){if(a&&200===a.code){var e=a.data.accountList,l=!0,r=!1,o=void 0;try{for(var n,i=t.accountTable.columns[Symbol.iterator]();!(l=(n=i.next()).done);l=!0){var s=n.value;if("accountId"==s.key){s.options=[];for(var c=0;c<e.length;c++){var d={};d.value=e[c].id+"",d.text=e[c].name,d.title=e[c].name,s.options.push(d)}}}}catch(m){r=!0,o=m}finally{try{l||null==i.return||i.return()}finally{if(r)throw o}}}}))},onValueChange:function(t){var a=this,e=(t.type,t.row,t.column),l=(t.value,t.target);switch(e.key){case"eachAmount":l.recalcAllStatisticsColumns(),a.autoChangeAmount(l);break}},autoChangeAmount:function(t){var a=this,e=t.statisticsColumns.eachAmount-0,l=this.form.getFieldValue("discountMoney")-0;l||(l=0);var r=(e-l).toFixed(2);this.$nextTick((function(){a.form.setFieldsValue({totalPrice:e,changeAmount:r})}))},onKeyUpDiscountMoney:function(t){var a=this,e=t.target.value-0,l=this.form.getFieldValue("totalPrice")-0,r=(l-e).toFixed(2);this.$nextTick((function(){a.form.setFieldsValue({changeAmount:r})}))},debtBillListOk:function(t){t&&t.length>0&&this.requestSubTableDataEx(t,this.accountTable)},requestSubTableDataEx:function(t,a,e){var l=this;a.loading=!0;for(var r=[],o=0,n=0;n<t.length;n++){var i=t[n];i.billNumber=i.number,i.needDebt=(i.discountLastMoney+i.otherMoney-i.changeAmount).toFixed(2),i.eachAmount=(i.discountLastMoney+i.otherMoney-i.changeAmount-i.finishDebt).toFixed(2),0!=i.eachAmount&&(o+=i.eachAmount-0,r.push(i))}a.dataSource=r,this.$nextTick((function(){l.form.setFieldsValue({totalPrice:o,changeAmount:o})})),"function"===typeof e&&e(res),a.loading=!1}}}},"761b":function(t,a,e){"use strict";e.r(a);var l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("j-modal",{staticStyle:{top:"5%",height:"100%","overflow-y":"hidden"},attrs:{title:t.title,width:t.width,visible:t.visible,confirmLoading:t.confirmLoading,maskClosable:!1,keyboard:!1,forceRender:!0,switchFullscreen:"",wrapClassName:"ant-modal-cust-warp"},on:{ok:t.handleOk,cancel:t.handleCancel}},[e("a-spin",{attrs:{spinning:t.confirmLoading}},[e("a-form",{attrs:{form:t.form}},[e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{lg:6,md:12,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"财务人员"}},[e("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["handsPersonId",t.validatorRules.handsPersonId],expression:"[ 'handsPersonId', validatorRules.handsPersonId ]"}],attrs:{placeholder:"选择财务人员",dropdownMatchSelectWidth:!1,showSearch:"",optionFilterProp:"children"}},t._l(t.personList,(function(a,l){return e("a-select-option",{key:l,attrs:{value:a.id}},[t._v("\n                "+t._s(a.name)+"\n              ")])})),1)],1)],1),e("a-col",{attrs:{lg:6,md:12,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"单据日期"}},[e("j-date",{directives:[{name:"decorator",rawName:"v-decorator",value:["billTime",t.validatorRules.billTime],expression:"['billTime', validatorRules.billTime]"}],attrs:{"show-time":!0}})],1)],1),e("a-col",{attrs:{lg:6,md:12,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"单据编号"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["billNo"],expression:"[ 'billNo' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入单据编号",readOnly:!0}})],1)],1),e("a-col",{attrs:{lg:6,md:12,sm:24}})],1),e("j-editable-table",{ref:t.refKeys[0],attrs:{loading:t.accountTable.loading,columns:t.accountTable.columns,dataSource:t.accountTable.dataSource,maxHeight:300,rowNumber:!1,rowSelection:!0,actionButton:!0},on:{valueChange:t.onValueChange}}),e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{lg:24,md:24,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:{xs:{span:24},sm:{span:24}},label:""}},[e("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"[ 'remark' ]"}],staticStyle:{"margin-top":"8px"},attrs:{rows:2,placeholder:"请输入备注"}})],1)],1)],1),e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{lg:6,md:12,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"付款账户"}},[e("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["accountId",t.validatorRules.accountId],expression:"[ 'accountId', validatorRules.accountId ]"}],attrs:{placeholder:"选择付款账户",dropdownMatchSelectWidth:!1,showSearch:"",optionFilterProp:"children"}},t._l(t.accountList,(function(a,l){return e("a-select-option",{key:l,attrs:{value:a.id}},[t._v("\n                "+t._s(a.name)+"\n              ")])})),1)],1)],1),e("a-col",{attrs:{lg:6,md:12,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"实付金额"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["changeAmount",t.validatorRules.changeAmount],expression:"[ 'changeAmount', validatorRules.changeAmount ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入实付金额"}})],1)],1),e("a-col",{attrs:{lg:6,md:12,sm:24}}),e("a-col",{attrs:{lg:6,md:12,sm:24}})],1),e("a-row",{staticClass:"form-row",attrs:{gutter:24}},[e("a-col",{attrs:{lg:6,md:12,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"附件"}},[e("j-upload",{attrs:{bizPath:"financial"},model:{value:t.fileList,callback:function(a){t.fileList=a},expression:"fileList"}})],1)],1)],1)],1)],1)],1)},r=[],o=e("88bc"),n=e.n(o),i=e("e2e0"),s=e("d0ed"),c=e("267bb"),d=e("cf74"),m=e("2dab"),u={name:"GiroModal",mixins:[s["a"],c["FinancialModalMixin"]],components:{JUpload:d["default"],JDate:m["default"]},data:function(){return{title:"操作",width:"1200px",moreStatus:!1,addDefaultRowNum:1,visible:!1,model:{},fileList:[],labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}},refKeys:["accountDataTable"],activeKey:"accountDataTable",accountTable:{loading:!1,dataSource:[],columns:[{title:"账户名称",key:"accountId",width:"20%",type:i["a"].select,placeholder:"请选择${title}",options:[],allowSearch:!0,validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"金额",key:"eachAmount",width:"10%",type:i["a"].inputNumber,statistics:!0,placeholder:"请选择${title}",validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"备注",key:"remark",width:"30%",type:i["a"].input,placeholder:"请选择${title}"}]},confirmLoading:!1,validatorRules:{handsPersonId:{rules:[{required:!0,message:"请选择财务人员!"}]},billTime:{rules:[{required:!0,message:"请选择单据日期!"}]},accountId:{rules:[{required:!0,message:"请选择付款账户!"}]},changeAmount:{rules:[{required:!0,message:"请输入实付金额!"}]}},url:{add:"/accountHead/addAccountHeadAndDetail",edit:"/accountHead/updateAccountHeadAndDetail",detailList:"/accountItem/getDetailList"}}},created:function(){},methods:{editAfter:function(){var t=this;if("add"===this.action)this.addInit("ZZ"),this.fileList=[];else{this.model.billTime=this.model.billTimeStr,this.$nextTick((function(){t.form.setFieldsValue(n()(t.model,"organId","handsPersonId","billTime","billNo","remark","accountId","changeAmount"))})),this.fileList=this.model.fileName;var a={headerId:this.model.id},e=(this.readOnly,this.url.detailList);this.requestSubTableData(e,a,this.accountTable)}this.initPerson(),this.initAccount(),this.initDetailAccount()},classifyIntoFormData:function(t){var a=0,e=Object.assign(this.model,t.formValue),l=t.tablesValue[0].values;e.type="转账";var r=!0,o=!1,n=void 0;try{for(var i,s=l[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;a+=c.eachAmount-0}}catch(d){o=!0,n=d}finally{try{r||null==s.return||s.return()}finally{if(o)throw n}}return e.totalPrice=0-a,e.changeAmount=0-e.changeAmount,this.fileList&&this.fileList.length>0&&(e.fileName=this.fileList),this.model.id&&(e.id=this.model.id),{info:JSON.stringify(e),rows:JSON.stringify(l)}},autoChangeAmount:function(t){var a=this,e=t.statisticsColumns.eachAmount-0;this.$nextTick((function(){a.form.setFieldsValue({changeAmount:e})}))}}},p=u,f=e("2877"),b=Object(f["a"])(p,l,r,!1,null,"08bef0dc",null);a["default"]=b.exports},8758:function(t,a,e){},"8e3c":function(t,a,e){"use strict";e.r(a),e.d(a,"FinancialListMixin",(function(){return r}));var l=e("4ec3"),r={data:function(){return{supList:[],cusList:[],retailList:[],userList:[],personList:[]}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)},isBatchDelEnabled:function(){for(var t=0;t<this.selectedRowKeys.length;t++)if(!this.selectionRows[t].actionsEnabled.delete)return!1;return!0}},methods:{myHandleAdd:function(){this.$refs.modalForm.action="add",this.handleAdd()},myHandleEdit:function(t){this.$refs.modalForm.action="edit",this.handleEdit(t)},myHandleDetail:function(t,a){this.handleDetail(t,a)},handleApprove:function(t){this.$refs.modalForm.action="approve",this.$refs.modalForm.edit(t),this.$refs.modalForm.title="审核"},searchReset:function(){this.queryParam={type:this.queryParam.type},this.loadData(1)},initSupplier:function(){var t=this;Object(l["db"])({}).then((function(a){a&&(t.supList=a)}))},initCustomer:function(){var t=this;Object(l["bb"])({}).then((function(a){a&&(t.cusList=a)}))},initRetail:function(){var t=this;Object(l["cb"])({}).then((function(a){a&&(t.retailList=a)}))},initUser:function(){var t=this;Object(l["sb"])({}).then((function(a){a&&(t.userList=a)}))},initPerson:function(){var t=this;Object(l["qb"])({type:"财务员"}).then((function(a){a&&200===a.code&&(t.personList=a.data.personList)}))},onDateChange:function(t,a){this.queryParam.beginTime=a[0],this.queryParam.endTime=a[1]},onDateOk:function(t){}}}},b25b:function(t,a,e){"use strict";var l=e("8758"),r=e.n(l);r.a},d0ed:function(t,a,e){"use strict";e.d(a,"a",(function(){return n}));var l=e("7550"),r=e("e2e0"),o=e("0fea"),n={components:{JEditableTable:l["default"]},data:function(){return{title:"操作",visible:!1,form:this.$form.createForm(this),confirmLoading:!1,model:{},labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}},methods:{getAllTable:function(){var t=this;if(!(this.refKeys instanceof Array))throw this.throwNotArray("refKeys");var a=this.refKeys.map((function(a){return Object(r["c"])(t,a)}));return Promise.all(a)},eachAllTable:function(t){this.getAllTable().then((function(a){a.forEach((function(a,e){"function"===typeof t&&t(a,e)}))}))},add:function(){"function"===typeof this.addBefore&&this.addBefore();var t=this.addDefaultRowNum;"number"!==typeof t&&(t=1),this.eachAllTable((function(a){a.add(t)})),"function"===typeof this.addAfter&&this.addAfter(this.model),this.edit({})},edit:function(t){"function"===typeof this.editBefore&&this.editBefore(t),this.visible=!0,this.activeKey=this.refKeys[0],this.form.resetFields(),this.model=Object.assign({},t),"function"===typeof this.editAfter&&this.editAfter(this.model)},close:function(){this.visible=!1,this.eachAllTable((function(t){t.initialize()})),this.$emit("close")},requestSubTableData:function(t,a,e,l){e.loading=!0,Object(o["c"])(t,a).then((function(t){t&&200===t.code&&(e.dataSource=t.data.rows,"function"===typeof l&&l(t))})).finally((function(){e.loading=!1}))},request:function(t){var a=this,e=this.url.add,l="post";this.model.id&&(e=this.url.edit,l="put"),this.confirmLoading=!0,Object(o["e"])(e,t,l).then((function(t){200===t.code?(a.$emit("ok"),a.confirmLoading=!1,a.close()):(a.$message.warning(t.data.message),a.confirmLoading=!1)})).finally((function(){}))},handleChangeTabs:function(t){Object(r["c"])(this,t).then((function(t){t.resetScrollTop()}))},handleCancel:function(){this.close()},handleOk:function(){var t=this;this.getAllTable().then((function(a){return Object(r["d"])(t.form,a)})).then((function(a){if("function"!==typeof t.classifyIntoFormData)throw t.throwNotFunction("classifyIntoFormData");var e=t.classifyIntoFormData(a);return t.request(e)})).catch((function(a){a.error===r["b"]&&(t.activeKey=null==a.index?t.activeKey:t.refKeys[a.index])}))},throwNotFunction:function(t){return"".concat(t," 未定义或不是一个函数")},throwNotArray:function(t){return"".concat(t," 未定义或不是一个数组")}}}},e612:function(t,a,e){"use strict";e.r(a);var l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:24}},[e("a-card",{attrs:{bordered:!1}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.searchQuery(a)}}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"单据编号",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-input",{attrs:{placeholder:"请输入单据编号"},model:{value:t.queryParam.billNo,callback:function(a){t.$set(t.queryParam,"billNo",a)},expression:"queryParam.billNo"}})],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"单据日期",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-range-picker",{staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD",placeholder:["开始时间","结束时间"]},on:{change:t.onDateChange,ok:t.onDateOk},model:{value:t.queryParam.createTimeRange,callback:function(a){t.$set(t.queryParam,"createTimeRange",a)},expression:"queryParam.createTimeRange"}})],1)],1),t.toggleSearchStatus?[e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"财务人员",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-select",{attrs:{placeholder:"选择财务人员",showSearch:"",optionFilterProp:"children"},model:{value:t.queryParam.handsPersonId,callback:function(a){t.$set(t.queryParam,"handsPersonId",a)},expression:"queryParam.handsPersonId"}},t._l(t.personList,(function(a,l){return e("a-select-option",{key:l,attrs:{value:a.id}},[t._v("\n                      "+t._s(a.name)+"\n                    ")])})),1)],1)],1),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"操作员",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-select",{attrs:{placeholder:"选择操作员",showSearch:"",optionFilterProp:"children"},model:{value:t.queryParam.creator,callback:function(a){t.$set(t.queryParam,"creator",a)},expression:"queryParam.creator"}},t._l(t.userList,(function(a,l){return e("a-select-option",{key:l,attrs:{value:a.id}},[t._v("\n                      "+t._s(a.userName)+"\n                    ")])})),1)],1)],1)]:t._e(),e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[e("a-col",{attrs:{md:6,sm:24}},[e("a-button",{attrs:{type:"primary"},on:{click:t.searchQuery}},[t._v("查询")]),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.searchReset}},[t._v("重置")]),e("a",{staticStyle:{"margin-left":"8px"},on:{click:t.handleToggleSearch}},[t._v("\n                  "+t._s(t.toggleSearchStatus?"收起":"展开")+"\n                  "),e("a-icon",{attrs:{type:t.toggleSearchStatus?"up":"down"}})],1)],1)],1)],2)],1)],1),e("div",{staticClass:"table-operator",staticStyle:{"margin-top":"5px"}},[t.btnEnableList.indexOf(1)>-1?e("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.myHandleAdd}},[t._v("新增")]):t._e(),t.selectedRowKeys.length>0?e("a-dropdown",[e("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t.btnEnableList.indexOf(1)>-1?e("a-menu-item",{key:"1",on:{click:t.batchDel}},[e("a-icon",{attrs:{type:"delete"}}),t._v("删除")],1):t._e()],1),e("a-button",{staticStyle:{"margin-left":"8px"}},[t._v("\n            批量操作 "),e("a-icon",{attrs:{type:"down"}})],1)],1):t._e(),e("a-tooltip",{attrs:{slot:"action",placement:"left",title:"转账：本系统的转账是指从一个银行存款账户转入到另一个银行存款账户。"},slot:"action"},[t.btnEnableList.indexOf(1)>-1?e("a-icon",{staticStyle:{"font-size":"20px",float:"right"},attrs:{type:"info-circle"}}):t._e()],1)],1),e("div",[e("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"id",columns:t.columns,dataSource:t.dataSource,pagination:t.ipagination,loading:t.loading,rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange}},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"action",fn:function(a,l){return e("span",{},[e("a",{on:{click:function(a){return t.myHandleDetail(l,"转账")}}},[t._v("查看")]),t.btnEnableList.indexOf(1)>-1?e("a-divider",{attrs:{type:"vertical"}}):t._e(),t.btnEnableList.indexOf(1)>-1?e("a",{on:{click:function(a){return t.myHandleEdit(l)}}},[t._v("编辑")]):t._e(),t.btnEnableList.indexOf(1)>-1?e("a-divider",{attrs:{type:"vertical"}}):t._e(),t.btnEnableList.indexOf(1)>-1?e("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return t.handleDelete(l.id)}}},[e("a",[t._v("删除")])]):t._e()],1)}}])})],1),e("giro-modal",{ref:"modalForm",on:{ok:t.modalFormOk}}),e("financial-detail",{ref:"modalDetail"})],1)],1)],1)},r=[],o=e("761b"),n=e("0b17"),i=e("b65a"),s=e("8e3c"),c=e("2dab"),d={name:"GiroList",mixins:[i["a"],s["FinancialListMixin"]],components:{GiroModal:o["default"],FinancialDetail:n["default"],JDate:c["default"]},data:function(){return{labelCol:{span:5},wrapperCol:{span:18,offset:1},queryParam:{billNo:"",searchMaterial:"",type:"转账",creator:"",handsPersonId:""},columns:[{title:"财务人员",dataIndex:"handsPersonName",width:140},{title:"单据编号",dataIndex:"billNo",width:160},{title:"单据日期 ",dataIndex:"billTimeStr",width:160},{title:"操作员",dataIndex:"userName",width:80},{title:"实付金额",dataIndex:"changeAmount",width:80},{title:"备注",dataIndex:"remark",width:200},{title:"操作",dataIndex:"action",width:200,align:"center",scopedSlots:{customRender:"action"}}],url:{list:"/accountHead/list",delete:"/accountHead/delete",deleteBatch:"/accountHead/deleteBatch"}}},computed:{},created:function(){this.initUser(),this.initPerson()},methods:{}},m=d,u=(e("b25b"),e("2877")),p=Object(u["a"])(m,l,r,!1,null,"89ef2234",null);a["default"]=p.exports}}]);