(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20e8a3"],{b098:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-tree-select",{staticStyle:{width:"100%"},attrs:{allowClear:"",labelInValue:"",getPopupContainer:function(e){return e.parentNode},disabled:e.disabled,dropdownStyle:{maxHeight:"400px",overflow:"auto"},placeholder:e.placeholder,loadData:e.asyncLoadTreeData,value:e.treeValue,treeData:e.treeData,multiple:e.multiple},on:{change:e.onChange,search:e.onSearch}})},n=[],r=i("0fea");function l(e){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function o(e){return c(e)||d(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}var s={name:"JTreeSelect",props:{value:{type:String,required:!1},placeholder:{type:String,default:"请选择",required:!1},dict:{type:String,default:"",required:!1},pidField:{type:String,default:"pid",required:!1},pidValue:{type:String,default:"",required:!1},disabled:{type:Boolean,default:!1,required:!1},hasChildField:{type:String,default:"",required:!1},condition:{type:String,default:"",required:!1},multiple:{type:Boolean,default:!1},loadTriggleChange:{type:Boolean,default:!1,required:!1}},data:function(){return{treeValue:null,treeData:[],url:"/sys/dict/loadTreeData",view:"/sys/dict/loadDictItem/",tableName:"",text:"",code:""}},watch:{value:function(){this.loadItemByCode()},dict:function(){this.initDictInfo(),this.loadRoot()}},created:function(){var e=this;this.validateProp().then((function(){e.initDictInfo(),e.loadRoot(),e.loadItemByCode()}))},methods:{loadItemByCode:function(){var e=this;this.value&&"0"!=this.value?Object(r["c"])("".concat(this.view).concat(this.dict),{key:this.value}).then((function(t){if(t.success){var i=e.value.split(",");e.treeValue=t.result.map((function(e,t){return{key:i[t],value:i[t],label:e}})),e.onLoadTriggleChange(t.result[0])}})):this.treeValue=null},onLoadTriggleChange:function(e){!this.multiple&&this.loadTriggleChange&&this.$emit("change",this.value,e)},initDictInfo:function(){var e=this.dict.split(",");this.tableName=e[0],this.text=e[1],this.code=e[2]},asyncLoadTreeData:function(e){var t=this;return new Promise((function(i){if(e.$vnode.children)i();else{var a=e.$vnode.key,n={pid:a,tableName:t.tableName,text:t.text,code:t.code,pidField:t.pidField,hasChildField:t.hasChildField,condition:t.condition};Object(r["c"])(t.url,n).then((function(e){if(e.success){var n=!0,r=!1,l=void 0;try{for(var u,d=e.result[Symbol.iterator]();!(n=(u=d.next()).done);n=!0){var c=u.value;c.value=c.key,0==c.leaf?c.isLeaf=!1:1==c.leaf&&(c.isLeaf=!0)}}catch(s){r=!0,l=s}finally{try{n||null==d.return||d.return()}finally{if(r)throw l}}t.addChildren(a,e.result,t.treeData),t.treeData=o(t.treeData)}i()}))}}))},addChildren:function(e,t,i){if(i&&i.length>0){var a=!0,n=!1,r=void 0;try{for(var l,o=i[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var u=l.value;if(u.key==e){t&&0!=t.length?u.children=t:u.isLeaf=!0;break}this.addChildren(e,t,u.children)}}catch(d){n=!0,r=d}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}}},loadRoot:function(){var e=this,t={pid:this.pidValue,tableName:this.tableName,text:this.text,code:this.code,pidField:this.pidField,hasChildField:this.hasChildField,condition:this.condition};Object(r["c"])(this.url,t).then((function(t){if(t.success&&t.result){var i=!0,a=!1,n=void 0;try{for(var r,l=t.result[Symbol.iterator]();!(i=(r=l.next()).done);i=!0){var u=r.value;u.value=u.key,0==u.leaf?u.isLeaf=!1:1==u.leaf&&(u.isLeaf=!0)}}catch(d){a=!0,n=d}finally{try{i||null==l.return||l.return()}finally{if(a)throw n}}e.treeData=o(t.result)}}))},onChange:function(e){e?e instanceof Array?(this.$emit("change",e.map((function(e){return e.value})).join(",")),this.treeValue=e):(this.$emit("change",e.value,e.label),this.treeValue=e):(this.$emit("change",""),this.treeValue=null)},onSearch:function(e){},getCurrTreeData:function(){return this.treeData},validateProp:function(){var e=this,t=this.condition;return new Promise((function(i,a){if(t)try{var n=JSON.parse(t);"object"==l(n)&&n?i():(e.$message.error("组件JTreeSelect-condition传值有误，需要一个json字符串!"),a())}catch(r){e.$message.error("组件JTreeSelect-condition传值有误，需要一个json字符串!"),a()}else i()}))}},model:{prop:"value",event:"change"}},h=s,f=i("2877"),y=Object(f["a"])(h,a,n,!1,null,null,null);t["default"]=y.exports}}]);