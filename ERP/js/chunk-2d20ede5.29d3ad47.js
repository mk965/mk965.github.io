(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20ede5"],{b0cd:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:"选择部门",width:e.modalWidth,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[n("a-spin",{attrs:{tip:"Loading...",spinning:!1}},[n("a-input-search",{staticStyle:{"margin-bottom":"1px"},attrs:{placeholder:"请输入部门名称按回车进行搜索"},on:{search:e.onSearch}}),n("a-tree",{attrs:{checkable:"",treeData:e.treeData,checkStrictly:!0,autoExpandParent:e.autoExpandParent,expandedKeys:e.expandedKeys,checkedKeys:e.checkedKeys},on:{check:e.onCheck,select:e.onSelect,expand:e.onExpand},scopedSlots:e._u([{key:"title",fn:function(t){var i=t.title;return[i.indexOf(e.searchValue)>-1?n("span",[e._v("\n          "+e._s(i.substr(0,i.indexOf(e.searchValue)))+"\n          "),n("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.searchValue))]),e._v("\n          "+e._s(i.substr(i.indexOf(e.searchValue)+e.searchValue.length))+"\n        ")]):n("span",[e._v(e._s(i))])]}}])})],1)],1)},r=[],a=n("4ec3");function c(e){return o(e)||h(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function o(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var l={name:"JSelectDepartModal",props:["modalWidth","multi","rootOpened","departId"],data:function(){return{visible:!1,confirmLoading:!1,treeData:[],autoExpandParent:!0,expandedKeys:[],dataList:[],checkedKeys:[],checkedRows:[],searchValue:""}},created:function(){this.loadDepart()},watch:{departId:function(){this.initDepartComponent()},visible:{handler:function(){this.departId?this.checkedKeys=this.departId.split(","):this.checkedKeys=[]}}},methods:{show:function(){this.visible=!0,this.checkedRows=[],this.checkedKeys=[]},loadDepart:function(){var e=this;Object(a["queryDepartTreeList"])().then((function(t){if(t.success){var n=c(t.result);e.reWriterWithSlot(n),e.treeData=n,e.initDepartComponent(),e.rootOpened&&e.initExpandedKeys(t.result)}}))},initDepartComponent:function(){var e="";if(this.departId){var t=this.departId,n=!0,i=!1,r=void 0;try{for(var a,c=this.dataList[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var s=a.value;t.indexOf(s.key)>=0&&(e+=","+s.title)}}catch(h){i=!0,r=h}finally{try{n||null==c.return||c.return()}finally{if(i)throw r}}e&&(e=e.substring(1))}this.$emit("initComp",e)},reWriterWithSlot:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var c=r.value;if(c.children&&c.children.length>0){this.reWriterWithSlot(c.children);var s=Object.assign({},c);s.children={},this.dataList.push(s)}else this.dataList.push(c),c.scopedSlots={title:"title"}}}catch(h){n=!0,i=h}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}},initExpandedKeys:function(e){if(e&&e.length>0){var t=[],n=!0,i=!1,r=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var s=a.value;s.children&&s.children.length>0&&t.push(s.id)}}catch(h){i=!0,r=h}finally{try{n||null==c.return||c.return()}finally{if(i)throw r}}this.expandedKeys=[].concat(t)}else this.expandedKeys=[]},onCheck:function(e,t){var n=this;if(this.multi)this.checkedKeys=e.checked,this.checkedRows=this.getCheckedRows(this.checkedKeys);else{var i=e.checked.filter((function(e){return n.checkedKeys.indexOf(e)<0}));this.checkedKeys=c(i),this.checkedRows=0===this.checkedKeys.length?[]:[t.node.dataRef]}},onSelect:function(e,t){var n=[];if(n.push(e[0]),this.checkedKeys&&0!==this.checkedKeys.length&&this.multi){var i,r=t.node.dataRef.key;if(this.checkedKeys.indexOf(r)>=0)this.checkedKeys=this.checkedKeys.filter((function(e){return e!==r}));else(i=this.checkedKeys).push.apply(i,n)}else this.checkedKeys=[].concat(n),this.checkedRows=[t.node.dataRef];this.checkedRows=this.getCheckedRows(this.checkedKeys)},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},handleSubmit:function(){this.checkedKeys&&0!=this.checkedKeys.length?this.$emit("ok",this.checkedRows,this.checkedKeys.join(",")):this.$emit("ok",""),this.handleClear()},handleCancel:function(){this.handleClear()},handleClear:function(){this.visible=!1,this.checkedKeys=[]},getParentKey:function(e,t){for(var n,i=0;i<t.length;i++){var r=t[i];r.children&&(r.children.some((function(t){return t.key===e}))?n=r.key:this.getParentKey(e,r.children)&&(n=this.getParentKey(e,r.children)))}return n},onSearch:function(e){var t=this,n=this.dataList.map((function(n){return n.title.indexOf(e)>-1?t.getParentKey(n.key,t.treeData):null})).filter((function(e,t,n){return e&&n.indexOf(e)===t}));Object.assign(this,{expandedKeys:n,searchValue:e,autoExpandParent:!0})},getCheckedRows:function(e){var t=function e(t,n){var i=!0,r=!1,a=void 0;try{for(var c,s=t[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var h=c.value;if(h.id===n)return h;if(h.children instanceof Array){var o=e(h.children,n);if(null!=o)return o}}}catch(l){r=!0,a=l}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return null},n=[],i=!0,r=!1,a=void 0;try{for(var c,s=e[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var h=c.value,o=t(this.treeData,h);null!=o&&n.push(o)}}catch(l){r=!0,a=l}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}}},d=l,u=n("2877"),f=Object(u["a"])(d,i,r,!1,null,"4907a211",null);t["default"]=f.exports}}]);