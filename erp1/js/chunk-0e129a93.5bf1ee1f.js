(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e129a93","chunk-2d20ede5"],{9884:function(e,t,n){"use strict";var i=n("9dfd"),a=n.n(i);a.a},"9dfd":function(e,t,n){},b0cd:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:"选择部门",width:e.modalWidth,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[n("a-spin",{attrs:{tip:"Loading...",spinning:!1}},[n("a-input-search",{staticStyle:{"margin-bottom":"1px"},attrs:{placeholder:"请输入部门名称按回车进行搜索"},on:{search:e.onSearch}}),n("a-tree",{attrs:{checkable:"",treeData:e.treeData,checkStrictly:!0,autoExpandParent:e.autoExpandParent,expandedKeys:e.expandedKeys,checkedKeys:e.checkedKeys},on:{check:e.onCheck,select:e.onSelect,expand:e.onExpand},scopedSlots:e._u([{key:"title",fn:function(t){var i=t.title;return[i.indexOf(e.searchValue)>-1?n("span",[e._v("\n          "+e._s(i.substr(0,i.indexOf(e.searchValue)))+"\n          "),n("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.searchValue))]),e._v("\n          "+e._s(i.substr(i.indexOf(e.searchValue)+e.searchValue.length))+"\n        ")]):n("span",[e._v(e._s(i))])]}}])})],1)],1)},a=[],r=n("4ec3");function s(e){return o(e)||c(e)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function o(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var l={name:"JSelectDepartModal",props:["modalWidth","multi","rootOpened","departId"],data:function(){return{visible:!1,confirmLoading:!1,treeData:[],autoExpandParent:!0,expandedKeys:[],dataList:[],checkedKeys:[],checkedRows:[],searchValue:""}},created:function(){this.loadDepart()},watch:{departId:function(){this.initDepartComponent()},visible:{handler:function(){this.departId?this.checkedKeys=this.departId.split(","):this.checkedKeys=[]}}},methods:{show:function(){this.visible=!0,this.checkedRows=[],this.checkedKeys=[]},loadDepart:function(){var e=this;Object(r["queryDepartTreeList"])().then((function(t){if(t.success){var n=s(t.result);e.reWriterWithSlot(n),e.treeData=n,e.initDepartComponent(),e.rootOpened&&e.initExpandedKeys(t.result)}}))},initDepartComponent:function(){var e="";if(this.departId){var t=this.departId,n=!0,i=!1,a=void 0;try{for(var r,s=this.dataList[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var d=r.value;t.indexOf(d.key)>=0&&(e+=","+d.title)}}catch(c){i=!0,a=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}e&&(e=e.substring(1))}this.$emit("initComp",e)},reWriterWithSlot:function(e){var t=!0,n=!1,i=void 0;try{for(var a,r=e[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var s=a.value;if(s.children&&s.children.length>0){this.reWriterWithSlot(s.children);var d=Object.assign({},s);d.children={},this.dataList.push(d)}else this.dataList.push(s),s.scopedSlots={title:"title"}}}catch(c){n=!0,i=c}finally{try{t||null==r.return||r.return()}finally{if(n)throw i}}},initExpandedKeys:function(e){if(e&&e.length>0){var t=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var d=r.value;d.children&&d.children.length>0&&t.push(d.id)}}catch(c){i=!0,a=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}this.expandedKeys=[].concat(t)}else this.expandedKeys=[]},onCheck:function(e,t){var n=this;if(this.multi)this.checkedKeys=e.checked,this.checkedRows=this.getCheckedRows(this.checkedKeys);else{var i=e.checked.filter((function(e){return n.checkedKeys.indexOf(e)<0}));this.checkedKeys=s(i),this.checkedRows=0===this.checkedKeys.length?[]:[t.node.dataRef]}},onSelect:function(e,t){var n=[];if(n.push(e[0]),this.checkedKeys&&0!==this.checkedKeys.length&&this.multi){var i,a=t.node.dataRef.key;if(this.checkedKeys.indexOf(a)>=0)this.checkedKeys=this.checkedKeys.filter((function(e){return e!==a}));else(i=this.checkedKeys).push.apply(i,n)}else this.checkedKeys=[].concat(n),this.checkedRows=[t.node.dataRef];this.checkedRows=this.getCheckedRows(this.checkedKeys)},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},handleSubmit:function(){this.checkedKeys&&0!=this.checkedKeys.length?this.$emit("ok",this.checkedRows,this.checkedKeys.join(",")):this.$emit("ok",""),this.handleClear()},handleCancel:function(){this.handleClear()},handleClear:function(){this.visible=!1,this.checkedKeys=[]},getParentKey:function(e,t){for(var n,i=0;i<t.length;i++){var a=t[i];a.children&&(a.children.some((function(t){return t.key===e}))?n=a.key:this.getParentKey(e,a.children)&&(n=this.getParentKey(e,a.children)))}return n},onSearch:function(e){var t=this,n=this.dataList.map((function(n){return n.title.indexOf(e)>-1?t.getParentKey(n.key,t.treeData):null})).filter((function(e,t,n){return e&&n.indexOf(e)===t}));Object.assign(this,{expandedKeys:n,searchValue:e,autoExpandParent:!0})},getCheckedRows:function(e){var t=function e(t,n){var i=!0,a=!1,r=void 0;try{for(var s,d=t[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){var c=s.value;if(c.id===n)return c;if(c.children instanceof Array){var o=e(c.children,n);if(null!=o)return o}}}catch(l){a=!0,r=l}finally{try{i||null==d.return||d.return()}finally{if(a)throw r}}return null},n=[],i=!0,a=!1,r=void 0;try{for(var s,d=e[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){var c=s.value,o=t(this.treeData,c);null!=o&&n.push(o)}}catch(l){a=!0,r=l}finally{try{i||null==d.return||d.return()}finally{if(a)throw r}}return n}}},h=l,u=n("2877"),p=Object(u["a"])(h,i,a,!1,null,"4907a211",null);t["default"]=p.exports},fe54:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"components-input-demo-presuffix"},[n("a-input",{attrs:{placeholder:"请点击选择部门",readOnly:"",disabled:e.disabled},on:{click:e.openModal},model:{value:e.departNames,callback:function(t){e.departNames=t},expression:"departNames"}},[n("a-icon",{attrs:{slot:"prefix",type:"cluster",title:"部门选择控件"},slot:"prefix"}),e.departIds?n("a-icon",{attrs:{slot:"suffix",type:"close-circle",title:"清空"},on:{click:e.handleEmpty},slot:"suffix"}):e._e()],1),n("j-select-depart-modal",{ref:"innerDepartSelectModal",attrs:{"modal-width":e.modalWidth,multi:e.multi,rootOpened:e.rootOpened,"depart-id":e.departIds},on:{ok:e.handleOK,initComp:e.initComp}})],1)},a=[],r=n("b0cd"),s={name:"JSelectDepart",components:{JSelectDepartModal:r["default"]},props:{modalWidth:{type:Number,default:500,required:!1},multi:{type:Boolean,default:!1,required:!1},rootOpened:{type:Boolean,default:!0,required:!1},value:{type:String,required:!1},disabled:{type:Boolean,required:!1,default:!1},customReturnField:{type:String,default:"id"}},data:function(){return{visible:!1,confirmLoading:!1,departNames:"",departIds:""}},mounted:function(){this.departIds=this.value},watch:{value:function(e){"id"===this.customReturnField&&(this.departIds=e)}},methods:{initComp:function(e){this.departNames=e},openModal:function(){this.$refs.innerDepartSelectModal.show()},handleOK:function(e,t){var n=this,i="";!e&&e.length<=0?(this.departNames="",this.departIds=""):(i=e.map((function(e){return e[n.customReturnField]})).join(","),this.departNames=e.map((function(e){return e["departName"]})).join(","),this.departIds=t),this.$emit("change",i)},getDepartNames:function(){return this.departNames},handleEmpty:function(){this.handleOK("")}},model:{prop:"value",event:"change"}},d=s,c=(n("9884"),n("2877")),o=Object(c["a"])(d,i,a,!1,null,"4d448922",null);t["default"]=o.exports}}]);